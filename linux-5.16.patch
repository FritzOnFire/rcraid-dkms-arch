diff -u old/rc_init.c new/rc_init.c
--- old/rc_init.c	2016-12-15 20:27:32.000000000 +0800
+++ new/rc_init.c	2022-01-19 11:04:18.718489862 +0800
@@ -175,9 +175,9 @@
 			   sector_t capacity, int geom[]);
 
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,36)
-int         rc_queue_cmd(struct scsi_cmnd * scp, void (*CompletionRoutine) (struct scsi_cmnd *));
+int         rc_queue_cmd(struct scsi_cmnd * scp);//, void (*CompletionRoutine) (struct scsi_cmnd *));
 #else
-int         rc_queue_cmd_lck(struct scsi_cmnd * scp, void (*CompletionRoutine) (struct scsi_cmnd *));
+int         rc_queue_cmd_lck(struct scsi_cmnd * scp);//, void (*CompletionRoutine) (struct scsi_cmnd *));
 #endif
 			 
 #ifdef RC_AHCI_SUPPORT
@@ -1378,18 +1378,18 @@
 
 
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,36)
-int rc_queue_cmd (struct scsi_cmnd * scp, void (*CompletionRoutine) (struct scsi_cmnd *))
+int rc_queue_cmd (struct scsi_cmnd * scp)//, void (*CompletionRoutine) (struct scsi_cmnd *))
 #else
-int rc_queue_cmd_lck (struct scsi_cmnd * scp, void (*CompletionRoutine) (struct scsi_cmnd *))
+int rc_queue_cmd_lck (struct scsi_cmnd * scp)//, void (*CompletionRoutine) (struct scsi_cmnd *))
 #endif
 
 {
-	scp->scsi_done = CompletionRoutine;
+	//scp->scsi_done = CompletionRoutine;
 	//#define FAIL_ALL_IO 0
 
 #ifdef FAIL_ALL_IO
 	scp->result = DID_NO_CONNECT << 16;
-	scp->scsi_done(scp);
+	/*scp->*/scsi_done(scp);
 	return 0;
 #endif

diff -u old/rc_msg.c new/rc_msg.c
--- old/rc_msg.c	2022-01-19 11:08:02.947474212 +0800
+++ new/rc_msg.c	2022-01-19 11:12:32.308455411 +0800
@@ -1423,7 +1423,7 @@
 		rc_printk(RC_ERROR, "rc_msg_send_srb:  scatter-gather list too large "
 			  "(%d)\n", scsi_sg_count(scp));
  		scp->result = DID_NO_CONNECT << 16;
- 		scp->scsi_done(scp);
+ 		/*scp->*/scsi_done(scp);
 		return 0;
 	}
 
@@ -1873,7 +1873,7 @@
 		scp->result = DID_OK << 16 | COMMAND_COMPLETE << 8 | SAM_STAT_GOOD;
 
 		GET_IO_REQUEST_LOCK_IRQSAVE(irql);
-		scp->scsi_done(scp);
+		/*scp->*/scsi_done(scp);
 		PUT_IO_REQUEST_LOCK_IRQRESTORE(irql);
 		srb->seq_num = -1;
 		kfree(srb);
@@ -1892,7 +1892,7 @@
 			  srb->seq_num);
 		scp->result = DID_BAD_TARGET << 16;
 		GET_IO_REQUEST_LOCK_IRQSAVE(irql);
-		scp->scsi_done(scp);
+		/*scp->*/scsi_done(scp);
 		PUT_IO_REQUEST_LOCK_IRQRESTORE(irql);
 		srb->seq_num = -1;
 		kfree(srb);
@@ -1929,7 +1929,7 @@
 	}
 
 	GET_IO_REQUEST_LOCK_IRQSAVE(irql);
-	scp->scsi_done (scp);
+	/*scp->*/scsi_done (scp);
 	PUT_IO_REQUEST_LOCK_IRQRESTORE(irql);
 	srb->seq_num = -1;
 	kfree(srb);

